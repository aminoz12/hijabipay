{% extends "base.html" %}

{% block content %}
<div class="bg-white shadow overflow-hidden sm:rounded-lg">
    <div class="px-4 py-5 sm:p-6 text-center">
        <div class="mx-auto flex items-center justify-center h-12 w-12 rounded-full bg-green-100">
            <i class="fas fa-check text-green-600 text-xl"></i>
        </div>
        <h2 class="mt-3 text-xl font-medium text-gray-900">Lien de paiement créé avec succès !</h2>
        
        <div class="mt-6 bg-gray-50 p-4 rounded-lg">
            <p class="text-sm text-gray-500 mb-2">Partagez ce lien avec votre client :</p>
            <div class="flex rounded-md shadow-sm">
                <input type="text" id="payment-link" readonly value="{{ payment_url }}" 
                       class="flex-1 min-w-0 block w-full px-3 py-2 rounded-none rounded-l-md border-gray-300 focus:ring-blue-500 focus:border-blue-500 sm:text-sm">
                <button onclick="copyToClipboard()" class="inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-r-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-1 focus:ring-blue-500 focus:border-blue-500">
                    <i class="far fa-copy mr-1"></i> Copier
                </button>
                <a href="{{ payment_url }}" target="_blank" class="inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-r-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-1 focus:ring-blue-500 focus:border-blue-500">
                    <i class="fas fa-external-link-alt mr-1"></i> Ouvrir
                </a>
            </div>
            <p class="mt-2 text-xs text-gray-500">Ce lien restera actif pendant 30 jours.</p>
        </div>
        
        <div class="mt-8 flex justify-center">
            <div class="inline-flex rounded-md shadow">
                <a href="{{ url_for('create_link') }}" class="inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500">
                    <i class="fas fa-plus-circle mr-2"></i> Créer un autre lien
                </a>
            </div>
            <div class="ml-3 inline-flex">
                <a href="{{ url_for('index') }}" class="inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500">
                    <i class="fas fa-home mr-2"></i> Retour à l'accueil
                </a>
            </div>
        </div>
    </div>
</div>

<script>
    function copyToClipboard() {
        const copyText = document.getElementById("payment-link");
        copyText.select();
        copyText.setSelectionRange(0, 99999);
        document.execCommand("copy");
        
        // Change button text temporarily
        const button = event.target.closest('button');
        const originalText = button.innerHTML;
        button.innerHTML = '<i class="fas fa-check mr-1"></i> Copié !';
        
        setTimeout(() => {
            button.innerHTML = originalText;
        }, 2000);
    }
</script>
{% endblock %}
